# КРИТИЧНО: Настройка VITE_BACKEND_API_URL для фронтенда

## Проблема
Запросы идут на фронтенд (`https://fortunate-rejoicing-production.up.railway.app/api/...`) вместо бэкенда.

## Причина
Переменная `VITE_BACKEND_API_URL` не установлена в Railway для фронтенда, поэтому используется относительный путь `/api`.

## РЕШЕНИЕ (обязательно выполнить!)

### Шаг 1: Узнайте URL бэкенда

1. Railway → **Backend сервис** → Settings → **Networking**
2. Найдите **Public Domain** (например: `https://vizitka-production.up.railway.app`)
3. Скопируйте этот URL

### Шаг 2: Установите переменную для фронтенда

1. Railway → **Frontend сервис** → Settings → **Variables**
2. Нажмите **+ New Variable**
3. **Name**: `VITE_BACKEND_API_URL`
4. **Value**: `https://vizitka-production.up.railway.app/api`
   - ⚠️ **ВАЖНО**: Замените на реальный URL вашего бэкенда!
   - ⚠️ **ВАЖНО**: URL должен заканчиваться на `/api`
5. Сохраните

### Шаг 3: ПЕРЕДЕПЛОЙТЕ фронтенд

⚠️ **КРИТИЧНО**: После установки переменной нужно пересобрать фронтенд!

1. Railway → Frontend сервис → **Deployments**
2. Нажмите **Redeploy** (или дождитесь автоматического редеплоя)
3. Дождитесь завершения сборки

### Шаг 4: Проверьте в браузере

1. Откройте фронтенд в браузере
2. F12 → **Console**
3. Должны появиться логи:
   ```
   [API] Backend URL: https://vizitka-production.up.railway.app/api
   [API] VITE_BACKEND_API_URL env: https://vizitka-production.up.railway.app/api
   ```

4. F12 → **Network**
5. Попробуйте зарегистрироваться
6. Найдите запрос к `register`
7. **Request URL** должен быть: `https://vizitka-production.up.railway.app/api/auth/register`
   - ✅ Правильно: URL бэкенда
   - ❌ Неправильно: URL фронтенда или `/api/auth/register`

## Важно!

- ✅ Переменная должна быть установлена **ДО** сборки фронтенда
- ✅ После установки переменной **ОБЯЗАТЕЛЬНО** передеплойте фронтенд
- ✅ URL должен быть полным (с `https://`) и заканчиваться на `/api`
- ✅ Переменная называется именно `VITE_BACKEND_API_URL` (с префиксом `VITE_`)

## Проверка правильности настройки

После передеплоя:

1. **Console браузера**: Должны быть логи с правильным URL бэкенда
2. **Network tab**: Запросы должны идти на домен бэкенда, а не фронтенда
3. **Регистрация**: Должна работать без ошибки 405

## Если не работает

1. Убедитесь, что переменная установлена правильно (с `/api` в конце)
2. Убедитесь, что фронтенд был пересобран ПОСЛЕ установки переменной
3. Очистите кэш браузера (Ctrl+Shift+Delete) или откройте в режиме инкогнито
4. Проверьте Console - там должны быть логи с правильным URL
